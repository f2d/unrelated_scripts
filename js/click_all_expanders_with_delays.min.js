(function(){
var targetTextParts=[/\d+\s+repl(y|ies)/i,'read more','more replies','show more','see more','load more comment','[+]','loading...','показать','раскрыть ветку','комментари',/Ещё\s+\d+\s+комментари/i,/Показать\s+\d+\s+ответ/i,'ещё',' ответ','▼','[show replies]','more>>','spoiler','expand'];
var targetCssClasses=['comment__more','comment__load-more','button','expand','PostTextMore','wall_post_more','wall_reply_more','mw-collapsible-text','NavToggle','HQToggle','comment-toggle-children_collapse','comment-hidden-group__toggle','community-info-block__read-more-label','story__read-more-label','shesht-comments-block-form-readmore','toggle-comment','ytd-continuation-item-renderer','more-button','comment-more-button_child','comments2--more-comments-button__block-3P','comments2--root-comment__textBtn-1S','comments2--rich-text__expandWord-2_','showreplies','ml-px','morelink','sp-head',/styles_lia-g-loader-btn__\S/i];
var skipCssClasses=['unfolded'];
var clickableTagNames=['a','button'];
var clickedElements=[];
function openAllVisibleExpanders(){var linksTotalCount=0;
function getClickCallback(e,i){return(
function(){if(window.stopOpeningExpanders){
console.log(i+' / '+linksTotalCount+' skipped');}else if(e){
console.log(i+' / '+linksTotalCount+' = '+e.textContent.replace(/^\s+|\s+$/g,'').replace(/\s+/g,' '));(getClickableChild(e)||e).click();}if(!window.stopOpeningExpanders&&i===linksTotalCount){
console.log('Retrying...');setTimeout(openAllVisibleExpanders,1234);}});}
function getClickableChild(e,a){
for(var eachTagName of clickableTagNames){if(e.tagName.toLowerCase()===eachTagName)return e;if(a=e.getElementsByTagName(eachTagName)[0])return a;}}
function checkLinkElement(eachLinkElement){
for(var eachSkipName of skipCssClasses)if(eachSkipName.test?eachSkipName.test(eachLinkElement.className):eachLinkElement.classList.contains(eachSkipName)return;var style,testElement=eachLinkElement;while(testElement)if(testElement.hidden||clickedElements.includes(testElement)||((style=testElement.style)&&(style.opacity===0||style.display==='none'||style.visibility==='hidden'))){return;}else{testElement=testElement.parentNode;}if(linkTextContent=eachLinkElement.textContent){var linkTextLowerCase=linkTextContent.toLowerCase();
for(var eachLinkText of targetTextParts)if(typeof eachLinkText==='string'?(linkTextContent.includes(eachLinkText)||linkTextLowerCase.includes(eachLinkText)):eachLinkText.test(linkTextContent)){++linksOfClassCount;++linksTotalCount;clickedElements.push(eachLinkElement);setTimeout(getClickCallback( eachLinkElement,linksTotalCount),linksTotalCount*900+Math.random()*900);break;}}}
for(var eachCssClass of targetCssClasses){var linksOfClassCount=0;if(eachCssClass.test){
for(var eachTagName of clickableTagNames)
for(var eachLinkElement of document.getElementsByTagName(eachTagName))if(eachCssClass.test(eachLinkElement.className)){checkLinkElement(eachLinkElement);}}else{
for(var eachLinkElement of document.getElementsByClassName(eachCssClass)){checkLinkElement(eachLinkElement);}}if(linksOfClassCount>0)
console.log('Found '+linksOfClassCount+' targets of class "'+eachCssClass+'" ');}
console.log('Total visible targets: '+linksTotalCount);if(!window.stopOpeningExpanders&&!linksTotalCount){setTimeout(openAllVisibleExpanders,12345);clickedElements=[];}}
openAllVisibleExpanders();
})(window.stopOpeningExpanders=0)